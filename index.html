<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ 5 –∫–ª–∞—Å—Å</title>
    <style>
        :root {
            --color-background: #f5f5f5;
            --color-surface: #ffffff;
            --color-text: #1a1a1a;
            --color-primary: #0078d4;
            --color-primary-hover: #106ebe;
            --color-border: #e0e0e0;
            --color-mountain: #a67c52;
            --color-plain: #7ca657;
            --color-river: #4a90e2;
            --color-sea: #2196f3;
            --color-ocean: #1976d2;
            --color-continent: #f4a460;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--color-background);
            color: var(--color-text);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--color-surface);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h1 {
            margin: 0 0 10px 0;
            font-size: 28px;
            color: var(--color-primary);
        }

        .subtitle {
            color: #666;
            font-size: 14px;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid var(--color-border);
            background: var(--color-surface);
            color: var(--color-text);
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
            font-size: 13px;
            font-weight: 500;
        }

        .filter-btn:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        .filter-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 1200px) {
            .content {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: var(--color-surface);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .content .panel:first-child {
            order: 2;
        }

        .content .panel:last-of-type {
            order: 1;
        }

        .panel-title {
            padding: 12px 16px;
            background: var(--color-primary);
            color: white;
            margin: 0;
            font-size: 14px;
            font-weight: 600;
        }

        .table-container {
            overflow-y: auto;
            max-height: 650px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 10px;
        }

        th {
            position: sticky;
            top: 0;
            background: #f9f9f9;
            padding: 5px 6px;
            text-align: left;
            border-bottom: 2px solid var(--color-border);
            font-weight: 600;
            color: var(--color-primary);
            font-size: 9px;
        }

        td {
            padding: 5px 6px;
            border-bottom: 1px solid var(--color-border);
        }

        tr:hover {
            background: #f9f9f9;
            cursor: pointer;
        }

        tr.table-row-active {
            background: #e3f2fd;
            font-weight: 600;
        }

        .category-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            white-space: nowrap;
        }

        .badge-pole { background: #e3f2fd; color: #0d47a1; }
        .badge-line { background: #f3e5f5; color: #4a148c; }
        .badge-continent { background: #fff3e0; color: #e65100; }
        .badge-ocean { background: #e0f2f1; color: #004d40; }
        .badge-mountain { background: #efebe9; color: #3e2723; }
        .badge-plain { background: #f1f8e9; color: #33691e; }
        .badge-river { background: #e3f2fd; color: #01579b; }
        .badge-lake { background: #b3e5fc; color: #01579b; }
        .badge-sea { background: #b3e5fc; color: #0277bd; }

        .map-container {
            position: relative;
            background: white;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            cursor: grab;
        }

        .map-container.dragging {
            cursor: grabbing;
        }

        .map-image {
            width: 100%;
            height: auto;
            border: 1px solid var(--color-border);
            border-radius: 4px;
            display: block;
            max-width: 100%;
            user-select: none;
            pointer-events: none;
            -webkit-user-drag: none;
        }

        .svg-overlay {
            position: absolute;
            top: 10px;
            left: 10px;
            width: calc(100% - 20px);
            height: calc(100% - 20px);
            cursor: grab;
            transform-origin: top left;
            pointer-events: all;
        }

        .svg-overlay.dragging {
            cursor: grabbing;
        }

        .svg-overlay .marker-group {
            pointer-events: all;
        }

        .coordinate-display {
            background: rgba(0, 0, 0, 0.75);
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-family: 'Courier New', monospace;
            pointer-events: none;
            user-select: none;
            margin-left: auto;
        }

        .zoom-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .zoom-btn {
            padding: 8px 12px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .zoom-btn:hover {
            background: var(--color-primary-hover);
        }

        .zoom-info {
            font-size: 12px;
            color: #666;
            min-width: 80px;
            text-align: center;
        }

        .map-wrapper {
            overflow: hidden;
            max-height: 600px;
            border: 1px solid var(--color-border);
            border-radius: 4px;
            position: relative;
        }

        .marker-circle {
            cursor: pointer;
            transition: all 0.2s ease;
            filter: drop-shadow(0 0 3px rgba(0,0,0,0.3));
        }

        .marker-circle:hover {
            filter: drop-shadow(0 0 6px rgba(0,0,0,0.5));
        }

        .marker-label {
            pointer-events: none;
            font-weight: bold;
            font-size: 12px;
            fill: white;
            text-shadow: 0 0 3px rgba(0,0,0,0.8);
        }

        .marker-label-bg {
            pointer-events: none;
            fill: rgba(0,0,0,0.7);
            rx: 3;
            ry: 3;
        }

        .tooltip {
            position: fixed;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
            display: none;
        }

        .tooltip.visible {
            display: block;
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            padding: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            padding: 20px;
        }

        .stat-box {
            background: var(--color-background);
            padding: 15px;
            border-radius: 4px;
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--color-primary);
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .search-box {
            width: 100%;
            padding: 6px 10px;
            border: 1px solid var(--color-border);
            border-radius: 4px;
            font-size: 11px;
            margin-bottom: 6px;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #999;
            font-size: 12px;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞</h1>
            <p class="subtitle">5 –∫–ª–∞—Å—Å ‚Ä¢ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∞—Ç–ª–∞—Å –º–∏—Ä–∞ —Å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–æ–≤</p>
        </header>

        <div class="stats">
            <div class="stat-box">
                <div class="stat-number" id="total-count">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="visible-count">0</div>
                <div class="stat-label">–í–∏–¥–∏–º–æ –Ω–∞ –∫–∞—Ä—Ç–µ</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="categories-count">0</div>
                <div class="stat-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–π</div>
            </div>
        </div>

        <div class="controls">
            <button class="filter-btn active" data-filter="all">–í—Å–µ –æ–±—ä–µ–∫—Ç—ã</button>
            <button class="filter-btn" data-filter="–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç">–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</button>
            <button class="filter-btn" data-filter="–ú–∞—Ç–µ—Ä–∏–∫–∏">–ú–∞—Ç–µ—Ä–∏–∫–∏</button>
            <button class="filter-btn" data-filter="–ß–∞—Å—Ç–∏ —Å–≤–µ—Ç–∞">–ß–∞—Å—Ç–∏ —Å–≤–µ—Ç–∞</button>
            <button class="filter-btn" data-filter="–û–∫–µ–∞–Ω—ã">–û–∫–µ–∞–Ω—ã</button>
            <button class="filter-btn" data-filter="–ì–æ—Ä—ã –∏ —Ä–∞–≤–Ω–∏–Ω—ã">–ì–æ—Ä—ã –∏ —Ä–∞–≤–Ω–∏–Ω—ã</button>
            <button class="filter-btn" data-filter="–†–µ–∫–∏ –∏ –æ–∑—ë—Ä–∞">–†–µ–∫–∏ –∏ –æ–∑—ë—Ä–∞</button>
            <button class="filter-btn" data-filter="–ú–æ—Ä—è">–ú–æ—Ä—è</button>
        </div>

        <div class="content">
            <div class="panel">
                <h2 class="panel-title">üìã –¢–∞–±–ª–∏—Ü–∞ –æ–±—ä–µ–∫—Ç–æ–≤</h2>
                <input type="text" class="search-box" id="search-input" placeholder="–ü–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–∞...">
                <div class="table-container">
                    <table id="objects-table">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</th>
                                <th>–¢–∏–ø</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="panel">
                <h2 class="panel-title">üó∫Ô∏è –ö–∞—Ä—Ç–∞ –º–∏—Ä–∞</h2>
                <div class="zoom-controls">
                    <button class="zoom-btn" onclick="zoomMap('out')">‚àí</button>
                    <span class="zoom-info">–ú–∞—Å—à—Ç–∞–±: <span id="zoom-level">100</span>%</span>
                    <button class="zoom-btn" onclick="zoomMap('in')">+</button>
                    <button class="zoom-btn" onclick="resetZoom()">–°–±—Ä–æ—Å</button>
                    <div class="coordinate-display" id="coordinate-display">X: ‚Äî, Y: ‚Äî</div>
                </div>
                <div class="map-wrapper">
                    <div class="map-container" id="map-container">
                        <img src="images/map.jpeg" id="world-map" alt="–ö–∞—Ä—Ç–∞ –º–∏—Ä–∞" class="map-image">
                        <svg id="markers-svg" class="svg-overlay"></svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel">
            <h2 class="panel-title">üé® –õ–µ–≥–µ–Ω–¥–∞</h2>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff4444;"></div>
                    <span>–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-continent);"></div>
                    <span>–ú–∞—Ç–µ—Ä–∏–∫–∏</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #c7b899;"></div>
                    <span>–ß–∞—Å—Ç–∏ —Å–≤–µ—Ç–∞</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-ocean);"></div>
                    <span>–û–∫–µ–∞–Ω—ã</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-mountain);"></div>
                    <span>–ì–æ—Ä—ã</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-plain);"></div>
                    <span>–†–∞–≤–Ω–∏–Ω—ã</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-river);"></div>
                    <span>–†–µ–∫–∏ –∏ –æ–∑—ë—Ä–∞</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-sea);"></div>
                    <span>–ú–æ—Ä—è</span>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö: –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –¥–ª—è 5 –∫–ª–∞—Å—Å–∞ ‚Ä¢ –ü—Ä–æ–µ–∫—Ü–∏—è: –ü—Å–µ–≤–¥–æ—Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è</p>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞)
        const objectsData = {
            '–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç': [
                { name: '–°–µ–≤–µ—Ä–Ω—ã–π –ø–æ–ª—é—Å', lat: 90, lon: 40, type: '—Ç–æ—á–∫–∞' },
                { name: '–Æ–∂–Ω—ã–π –ø–æ–ª—é—Å', lat: -90, lon: 40, type: '—Ç–æ—á–∫–∞' },
                { name: '–≠–∫–≤–∞—Ç–æ—Ä', lat: 0, lon: 40, type: '–ª–∏–Ω–∏—è' },
                { name: '–ù—É–ª–µ–≤–æ–π –º–µ—Ä–∏–¥–∏–∞–Ω', lat: 0, lon: 0, type: '–ª–∏–Ω–∏—è' },
                { name: '–°–µ–≤–µ—Ä–Ω—ã–π —Ç—Ä–æ–ø–∏–∫', lat: 23.5, lon: 40, type: '–ª–∏–Ω–∏—è' },
                { name: '–Æ–∂–Ω—ã–π —Ç—Ä–æ–ø–∏–∫', lat: -23.5, lon: 40, type: '–ª–∏–Ω–∏—è' },
                { name: '–°–µ–≤–µ—Ä–Ω—ã–π –ø–æ–ª—è—Ä–Ω—ã–π –∫—Ä—É–≥', lat: 66.5, lon: 40, type: '–ª–∏–Ω–∏—è' },
                { name: '–Æ–∂–Ω—ã–π –ø–æ–ª—è—Ä–Ω—ã–π –∫—Ä—É–≥', lat: -66.5, lon: 40, type: '–ª–∏–Ω–∏—è' }
            ],
            '–ú–∞—Ç–µ—Ä–∏–∫–∏': [
                { name: '–ï–≤—Ä–∞–∑–∏—è', lat: 50, lon: 80, type: '–º–∞—Ç–µ—Ä–∏–∫' },
                { name: '–ê—Ñ—Ä–∏–∫–∞', lat: 0, lon: 20, type: '–º–∞—Ç–µ—Ä–∏–∫' },
                { name: '–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞', lat: 45, lon: -95, type: '–º–∞—Ç–µ—Ä–∏–∫' },
                { name: '–Æ–∂–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞', lat: -15, lon: -60, type: '–º–∞—Ç–µ—Ä–∏–∫' },
                { name: '–ê–≤—Å—Ç—Ä–∞–ª–∏—è', lat: -25, lon: 133, type: '–º–∞—Ç–µ—Ä–∏–∫' },
                { name: '–ê–Ω—Ç–∞—Ä–∫—Ç–∏–¥–∞', lat: -82, lon: 40, type: '–º–∞—Ç–µ—Ä–∏–∫' }
            ],
            '–ß–∞—Å—Ç–∏ —Å–≤–µ—Ç–∞': [
                { name: '–ï–≤—Ä–æ–ø–∞', lat: 50, lon: 25, type: '—á–∞—Å—Ç—å —Å–≤–µ—Ç–∞' },
                { name: '–ê–∑–∏—è', lat: 50, lon: 100, type: '—á–∞—Å—Ç—å —Å–≤–µ—Ç–∞' },
                { name: '–ê–º–µ—Ä–∏–∫–∞', lat: 15, lon: -80, type: '—á–∞—Å—Ç—å —Å–≤–µ—Ç–∞' },
                { name: '–ê—Ñ—Ä–∏–∫–∞', lat: 0, lon: 20, type: '—á–∞—Å—Ç—å —Å–≤–µ—Ç–∞' },
                { name: '–ê–≤—Å—Ç—Ä–∞–ª–∏—è –∏ –û–∫–µ–∞–Ω–∏—è', lat: -25, lon: 150, type: '—á–∞—Å—Ç—å —Å–≤–µ—Ç–∞' },
                { name: '–ê–Ω—Ç–∞—Ä–∫—Ç–∏–¥–∞', lat: -82, lon: 0, type: '—á–∞—Å—Ç—å —Å–≤–µ—Ç–∞' }
            ],
            '–û–∫–µ–∞–Ω—ã': [
                { name: '–°–µ–≤–µ—Ä–Ω—ã–π –õ–µ–¥–æ–≤–∏—Ç—ã–π –æ–∫–µ–∞–Ω', lat: 82, lon: 40, type: '–æ–∫–µ–∞–Ω' },
                { name: '–ê—Ç–ª–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –æ–∫–µ–∞–Ω', lat: 20, lon: -35, type: '–æ–∫–µ–∞–Ω' },
                { name: '–¢–∏—Ö–∏–π –æ–∫–µ–∞–Ω', lat: 10, lon: -155, type: '–æ–∫–µ–∞–Ω' },
                { name: '~–¢–∏—Ö–∏–π –æ–∫–µ–∞–Ω –∑–∞–ø–∞–¥–Ω—ã–π', lat: 10, lon: -120, type: '–æ–∫–µ–∞–Ω' },
                { name: '–ò–Ω–¥–∏–π—Å–∫–∏–π –æ–∫–µ–∞–Ω', lat: -20, lon: 70, type: '–æ–∫–µ–∞–Ω' },
                { name: '–Æ–∂–Ω—ã–π –æ–∫–µ–∞–Ω', lat: -70, lon: 40, type: '–æ–∫–µ–∞–Ω' }
            ],
            '–ì–æ—Ä—ã –∏ —Ä–∞–≤–Ω–∏–Ω—ã': [
                { name: '–£—Ä–∞–ª—å—Å–∫–∏–µ –≥–æ—Ä—ã', lat: 60, lon: 60, type: '–≥–æ—Ä—ã' },
                { name: '–ö–∞–≤–∫–∞–∑—Å–∫–∏–µ –≥–æ—Ä—ã', lat: 43, lon: 44, type: '–≥–æ—Ä—ã' },
                { name: '–ê–ª—å–ø—ã', lat: 46, lon: 10, type: '–≥–æ—Ä—ã' },
                { name: '–ì–∏–º–∞–ª–∞–∏', lat: 28, lon: 84, type: '–≥–æ—Ä—ã' },
                { name: '–ö–æ—Ä–¥–∏–ª—å–µ—Ä—ã', lat: 50, lon: -105, type: '–≥–æ—Ä—ã' },
                { name: '–ê–Ω–¥—ã', lat: -20, lon: -70, type: '–≥–æ—Ä—ã' },
                { name: '–í–æ—Å—Ç–æ—á–Ω–æ-–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è —Ä–∞–≤–Ω–∏–Ω–∞', lat: 50, lon: 25, type: '—Ä–∞–≤–Ω–∏–Ω–∞' },
                { name: '–ó–∞–ø–∞–¥–Ω–æ-–°–∏–±–∏—Ä—Å–∫–∞—è —Ä–∞–≤–Ω–∏–Ω–∞', lat: 65, lon: 75, type: '—Ä–∞–≤–Ω–∏–Ω–∞' }
            ],
            '–†–µ–∫–∏ –∏ –æ–∑—ë—Ä–∞': [
                { name: '–í–æ–ª–≥–∞', lat: 54, lon: 40, type: '—Ä–µ–∫–∞' },
                { name: '–û–±—å', lat: 66, lon: 73, type: '—Ä–µ–∫–∞' },
                { name: '–ï–Ω–∏—Å–µ–π', lat: 69, lon: 87, type: '—Ä–µ–∫–∞' },
                { name: '–õ–µ–Ω–∞', lat: 72, lon: 127, type: '—Ä–µ–∫–∞' },
                { name: '–ê–º—É—Ä', lat: 53, lon: 128, type: '—Ä–µ–∫–∞' },
                { name: '–ù–∏–ª', lat: 26, lon: 31, type: '—Ä–µ–∫–∞' },
                { name: '–ê–º–∞–∑–æ–Ω–∫–∞', lat: -5, lon: -63, type: '—Ä–µ–∫–∞' },
                { name: '–ú–∏—Å—Å–∏—Å–∏–ø–∏', lat: 35, lon: -92, type: '—Ä–µ–∫–∞' },
                { name: '–æ–∑. –ë–∞–π–∫–∞–ª', lat: 54, lon: 104, type: '–æ–∑–µ—Ä–æ' },
                { name: '–õ–∞–¥–æ–∂—Å–∫–æ–µ –æ–∑–µ—Ä–æ', lat: 60.8, lon: 32, type: '–æ–∑–µ—Ä–æ' },
                { name: '–û–Ω–µ–∂—Å–∫–æ–µ –æ–∑–µ—Ä–æ', lat: 61.5, lon: 34.5, type: '–æ–∑–µ—Ä–æ' }
            ],
            '–ú–æ—Ä—è': [
                { name: '–ß—ë—Ä–Ω–æ–µ –º–æ—Ä–µ', lat: 43, lon: 35, type: '–º–æ—Ä–µ' },
                { name: '–ö–∞—Å–ø–∏–π—Å–∫–æ–µ –º–æ—Ä–µ', lat: 45, lon: 50, type: '–º–æ—Ä–µ' },
                { name: '–ë–∞–ª—Ç–∏–π—Å–∫–æ–µ –º–æ—Ä–µ', lat: 57, lon: 19, type: '–º–æ—Ä–µ' },
                { name: '–ë–µ–ª–æ–µ –º–æ—Ä–µ', lat: 65, lon: 40, type: '–º–æ—Ä–µ' },
                { name: '–ë–∞—Ä–µ–Ω—Ü–µ–≤–æ –º–æ—Ä–µ', lat: 75, lon: 35, type: '–º–æ—Ä–µ' },
                { name: '–°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–µ –º–æ—Ä–µ', lat: 35, lon: 18, type: '–º–æ—Ä–µ' },
                { name: '–ö–∞—Ä–∏–±—Å–∫–æ–µ –º–æ—Ä–µ', lat: 15, lon: -75, type: '–º–æ—Ä–µ' }
            ]
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
        function coordsToPixels(lat, lon, svgWidth, svgHeight) {
            // –ü–æ–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Ç–æ, —á—Ç–æ —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—Ç—ã –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ 40¬∞ –≤–æ—Å—Ç–æ—á–Ω–æ–π –¥–æ–ª–≥–æ—Ç—ã
            const centerLon = 40;
            const lonFromCenter = lon - centerLon;

            // –ù–æ—Ä–º–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–æ–ª–≥–æ—Ç—É –≤ –¥–∏–∞–ø–∞–∑–æ–Ω [-180, 180]
            let normalizedLon = lonFromCenter;
            if (normalizedLon > 180) normalizedLon -= 360;
            if (normalizedLon < -180) normalizedLon += 360;

            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –ø–∏–∫—Å–µ–ª–∏ –¥–ª—è –ø—Å–µ–≤–¥–æ—Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–µ–∫—Ü–∏–∏
            const pixelX = (normalizedLon / 180) * (svgWidth / 2) + (svgWidth / 2);
            const pixelY = ((90 - lat) / 180) * svgHeight;

            return { x: pixelX, y: pixelY };
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ä—Ç—ã
        let mapZoom = 1;
        const minZoom = 0.5;
        const maxZoom = 4;
        let panX = 0;
        let panY = 0;
        let isDragging = false;
        let dragStartX = 0;
        let dragStartY = 0;
        let startPanX = 0;
        let startPanY = 0;

        function zoomMap(direction) {
            const zoomStep = 0.2;
            const mapContainer = document.getElementById('map-container');
            const rect = mapContainer.getBoundingClientRect();
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            zoomAtPoint(direction === 'in' ? zoomStep : -zoomStep, centerX, centerY);
        }

        function zoomAtPoint(delta, x, y) {
            const oldZoom = mapZoom;
            mapZoom = Math.max(minZoom, Math.min(maxZoom, mapZoom + delta));
            
            if (mapZoom !== oldZoom) {
                // –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–æ—á–∫–∏ –º—ã—à–∏
                const zoomFactor = mapZoom / oldZoom;
                const mapContainer = document.getElementById('map-container');
                const rect = mapContainer.getBoundingClientRect();
                
                // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—Å —É—á–µ—Ç–æ–º padding 10px)
                const relativeX = x - rect.left - 10;
                const relativeY = y - rect.top - 10;
                
                // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–æ—á–∫–∏ –º—ã—à–∏
                panX = relativeX - (relativeX - panX) * zoomFactor;
                panY = relativeY - (relativeY - panY) * zoomFactor;
                
                constrainPan();
                updateMapTransform();
            }
        }

        function resetZoom() {
            mapZoom = 1;
            panX = 0;
            panY = 0;
            updateMapTransform();
        }

        function constrainPan() {
            const mapImg = document.getElementById('world-map');
            const mapContainer = document.getElementById('map-container');
            
            // –ü–æ–ª—É—á–∞–µ–º –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const naturalWidth = mapImg.naturalWidth || mapImg.offsetWidth;
            const naturalHeight = mapImg.naturalHeight || mapImg.offsetHeight;
            
            // –†–∞–∑–º–µ—Ä—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å —É—á–µ—Ç–æ–º padding (10px —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã)
            const containerWidth = mapContainer.offsetWidth - 20;
            const containerHeight = mapContainer.offsetHeight - 20;
            
            // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
            const scaledWidth = naturalWidth * mapZoom;
            const scaledHeight = naturalHeight * mapZoom;
            
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –º–µ–Ω—å—à–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –µ—ë
            if (scaledWidth <= containerWidth) {
                panX = (containerWidth - scaledWidth) / 2;
            } else {
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã
                const maxPanX = (scaledWidth - containerWidth) / 2;
                panX = Math.max(-maxPanX, Math.min(maxPanX, panX));
            }
            
            if (scaledHeight <= containerHeight) {
                panY = (containerHeight - scaledHeight) / 2;
            } else {
                const maxPanY = (scaledHeight - containerHeight) / 2;
                panY = Math.max(-maxPanY, Math.min(maxPanY, panY));
            }
        }

        function updateMapTransform() {
            const mapImg = document.getElementById('world-map');
            const svg = document.getElementById('markers-svg');
            const mapContainer = document.getElementById('map-container');
            
            const transform = `translate(${panX}px, ${panY}px) scale(${mapZoom})`;
            mapImg.style.transform = transform;
            mapImg.style.transformOrigin = 'top left';
            svg.style.transform = transform;
            svg.style.transformOrigin = 'top left';
            
            document.getElementById('zoom-level').textContent = Math.round(mapZoom * 100);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
        function updatePixelCoordinates(e) {
            const mapContainer = document.getElementById('map-container');
            const mapImg = document.getElementById('world-map');
            const coordDisplay = document.getElementById('coordinate-display');
            const svg = document.getElementById('markers-svg');
            
            const rect = mapContainer.getBoundingClientRect();
            const mouseX = e.clientX;
            const mouseY = e.clientY;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –º—ã—à—å –Ω–∞–¥ –∫–∞—Ä—Ç–æ–π
            if (mouseX >= rect.left && mouseX <= rect.right && 
                mouseY >= rect.top && mouseY <= rect.bottom) {
                
                // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—Å —É—á–µ—Ç–æ–º padding 10px)
                const relativeX = mouseX - rect.left - 10;
                const relativeY = mouseY - rect.top - 10;
                
                // –£—á–∏—Ç—ã–≤–∞–µ–º –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–± –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
                const imgX = (relativeX - panX) / mapZoom;
                const imgY = (relativeY - panY) / mapZoom;
                
                // –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const svgWidth = parseFloat(svg.getAttribute('width')) || mapImg.offsetWidth;
                const svgHeight = parseFloat(svg.getAttribute('height')) || mapImg.offsetHeight;
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –≤–Ω–µ –≥—Ä–∞–Ω–∏—Ü –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
                coordDisplay.textContent = `X: ${Math.round(imgX)}, Y: ${Math.round(imgY)}`;
                coordDisplay.style.display = 'block';
            } else {
                coordDisplay.style.display = 'none';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º—ã—à–∏ –¥–ª—è –∫–∞—Ä—Ç—ã
        function initMapMouseControls() {
            const mapContainer = document.getElementById('map-container');
            const svg = document.getElementById('markers-svg');
            let dragStarted = false;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–µ—Å–∏–∫–∞ –º—ã—à–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
            mapContainer.addEventListener('wheel', (e) => {
                e.preventDefault();
                const delta = e.deltaY > 0 ? -0.1 : 0.1;
                zoomAtPoint(delta, e.clientX, e.clientY);
            }, { passive: false });
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
            function startDrag(e) {
                if (e.button === 0) { // –õ–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∫–ª–∏–∫–Ω—É–ª–∏ –ª–∏ –º—ã –Ω–∞ –º–∞—Ä–∫–µ—Ä
                    const target = e.target;
                    const isMarker = target.classList.contains('marker-circle') || 
                                   target.closest('.marker-group') !== null ||
                                   target.tagName === 'text' ||
                                   target.classList.contains('marker-label-bg');
                    
                    if (!isMarker) {
                        isDragging = true;
                        dragStarted = false;
                        dragStartX = e.clientX;
                        dragStartY = e.clientY;
                        startPanX = panX;
                        startPanY = panY;
                        mapContainer.classList.add('dragging');
                        svg.classList.add('dragging');
                        e.preventDefault();
                        e.stopPropagation();
                    }
                }
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∫–∞—Ä—Ç—ã –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
            mapContainer.addEventListener('mousedown', startDrag);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –Ω–∞ SVG (—Ñ–æ–Ω –∫–∞—Ä—Ç—ã)
            svg.addEventListener('mousedown', (e) => {
                // –ï—Å–ª–∏ –∫–ª–∏–∫ –Ω–µ –Ω–∞ –º–∞—Ä–∫–µ—Ä–µ, –Ω–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
                const target = e.target;
                if (target === svg || target.tagName === 'svg') {
                    startDrag(e);
                }
            });
            
            // –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    if (!dragStarted) {
                        dragStarted = true;
                    }
                    const deltaX = e.clientX - dragStartX;
                    const deltaY = e.clientY - dragStartY;
                    panX = startPanX + deltaX;
                    panY = startPanY + deltaY;
                    constrainPan();
                    updateMapTransform();
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
                    updatePixelCoordinates(e);
                    e.preventDefault();
                }
            });
            
            // –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –º—ã—à–∏
            document.addEventListener('mouseup', (e) => {
                if (isDragging) {
                    isDragging = false;
                    dragStarted = false;
                    mapContainer.classList.remove('dragging');
                    svg.classList.remove('dragging');
                }
            });
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
            mapContainer.addEventListener('contextmenu', (e) => {
                if (isDragging) {
                    e.preventDefault();
                }
            });
            
            svg.addEventListener('contextmenu', (e) => {
                if (isDragging) {
                    e.preventDefault();
                }
            });
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
            mapContainer.addEventListener('selectstart', (e) => {
                if (isDragging) {
                    e.preventDefault();
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
            mapContainer.addEventListener('mousemove', updatePixelCoordinates);
            svg.addEventListener('mousemove', updatePixelCoordinates);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –º—ã—à–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–∞—Ä—Ç—ã
            mapContainer.addEventListener('mouseleave', () => {
                document.getElementById('coordinate-display').style.display = 'none';
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–∏–ø–∞
        function getMarkerColor(category, type) {
            if (category === '–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç') return '#ff4444';
            if (category === '–ú–∞—Ç–µ—Ä–∏–∫–∏') return '#f4a460';
            if (category === '–ß–∞—Å—Ç–∏ —Å–≤–µ—Ç–∞') return '#c7b899';
            if (category === '–û–∫–µ–∞–Ω—ã') return '#1976d2';
            if (category === '–ì–æ—Ä—ã –∏ —Ä–∞–≤–Ω–∏–Ω—ã') {
                return (type === '–≥–æ—Ä—ã') ? '#a67c52' : '#7ca657';
            }
            if (category === '–†–µ–∫–∏ –∏ –æ–∑—ë—Ä–∞') return '#4a90e2';
            if (category === '–ú–æ—Ä—è') return '#2196f3';
            return '#666';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è CSS –∫–ª–∞—Å—Å–∞ –±–µ–π–¥–∂–∞
        function getBadgeClass(type) {
            const typeMap = {
                '—Ç–æ—á–∫–∞': 'badge-pole',
                '–ª–∏–Ω–∏—è': 'badge-line',
                '–º–∞—Ç–µ—Ä–∏–∫': 'badge-continent',
                '–æ–∫–µ–∞–Ω': 'badge-ocean',
                '–≥–æ—Ä—ã': 'badge-mountain',
                '—Ä–∞–≤–Ω–∏–Ω–∞': 'badge-plain',
                '—Ä–µ–∫–∞': 'badge-river',
                '–æ–∑–µ—Ä–æ': 'badge-lake',
                '–º–æ—Ä–µ': 'badge-sea'
            };
            return typeMap[type] || 'badge-plain';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –¥–ª—è —á–∞—Å—Ç–µ–π —Å–≤–µ—Ç–∞
        function getMarkerColorForRegion(type) {
            const regionMap = {
                '—á–∞—Å—Ç—å —Å–≤–µ—Ç–∞': '#c7b899'
            };
            return regionMap[type] || '#666';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        let currentFilter = 'all';
        let currentSearch = '';
        let allObjects = [];

        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –µ–¥–∏–Ω—ã–π —Å–ø–∏—Å–æ–∫
        function prepareAllObjects() {
            allObjects = [];
            for (const [category, objects] of Object.entries(objectsData)) {
                objects.forEach(obj => {
                    allObjects.push({ ...obj, category });
                });
            }
        }

        function updateTable() {
            const tbody = document.querySelector('#objects-table tbody');
            tbody.innerHTML = '';
            let visibleCount = 0;

            for (const [category, objects] of Object.entries(objectsData)) {
                if (currentFilter !== 'all' && currentFilter !== category) continue;

                objects.forEach(obj => {
                    if (currentSearch && !obj.name.toLowerCase().includes(currentSearch.toLowerCase())) {
                        return;
                    }

                    if (obj.name.startsWith('~')) {
                        return;
                    }

                    visibleCount++;
                    const row = document.createElement('tr');
                    const coords = `${Math.abs(obj.lat)}¬∞${obj.lat >= 0 ? 'N' : 'S'} ${Math.abs(obj.lon)}¬∞${obj.lon >= 0 ? 'E' : 'W'}`;
                    
                    row.innerHTML = `
                        <td><strong>${obj.name}</strong></td>
                        <td><span class="category-badge">${category}</span></td>
                        <td>${coords}</td>
                        <td><span class="category-badge ${getBadgeClass(obj.type)}">${obj.type}</span></td>
                    `;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                    row.addEventListener('mouseenter', () => {
                        row.classList.add('table-row-active');
                        highlightMarker(obj.name);
                    });
                    row.addEventListener('mouseleave', () => {
                        row.classList.remove('table-row-active');
                        clearHighlight();
                    });
                    row.addEventListener('click', () => {
                        scrollToMarker(obj.name);
                        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ª–∏–Ω–∏–π –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Ç—Ä–æ–∫—É —Ç–∞–±–ª–∏—Ü—ã
                        if (obj.name === '–≠–∫–≤–∞—Ç–æ—Ä') {
                            const svg = document.getElementById('markers-svg');
                            drawEquatorLine(svg, svg.getAttribute('height'));
                        }
                    });
                    
                    tbody.appendChild(row);
                });
            }

            document.getElementById('visible-count').textContent = visibleCount;
        }

        function updateMap() {
            const mapContainer = document.getElementById('map-container');
            const mapImg = document.getElementById('world-map');
            const svg = document.getElementById('markers-svg');
            
            // –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã SVG
            const rect = mapContainer.getBoundingClientRect();
            const svgWidth = mapImg.offsetWidth;
            const svgHeight = mapImg.offsetHeight;

            svg.setAttribute('viewBox', `0 0 ${svgWidth} ${svgHeight}`);
            svg.setAttribute('width', svgWidth);
            svg.setAttribute('height', svgHeight);
            svg.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –ø–æ –≤—Å–µ–π –æ–±–ª–∞—Å—Ç–∏ SVG
            const backgroundRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            backgroundRect.setAttribute('x', 0);
            backgroundRect.setAttribute('y', 0);
            backgroundRect.setAttribute('width', svgWidth);
            backgroundRect.setAttribute('height', svgHeight);
            backgroundRect.setAttribute('fill', 'transparent');
            backgroundRect.setAttribute('pointer-events', 'all');
            backgroundRect.style.cursor = 'grab';
            svg.appendChild(backgroundRect);

            let visibleMarkersCount = 0;

            for (const [category, objects] of Object.entries(objectsData)) {
                if (currentFilter !== 'all' && currentFilter !== category) continue;

                objects.forEach(obj => {
                    if (currentSearch && !obj.name.toLowerCase().includes(currentSearch.toLowerCase())) {
                        return;
                    }                        const pixels = coordsToPixels(obj.lat, obj.lon, svgWidth, svgHeight);

                    // –ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –º–∞—Ä–∫–µ—Ä –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏
                    if (pixels.x >= 0 && pixels.x <= svgWidth && pixels.y >= 0 && pixels.y <= svgHeight) {
                        visibleMarkersCount++;
                        const color = getMarkerColor(category, obj.type);
                        
                        // –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø—É –¥–ª—è –º–∞—Ä–∫–µ—Ä–∞ –∏ –º–µ—Ç–∫–∏
                        const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                        group.setAttribute('data-name', obj.name);
                        group.setAttribute('class', 'marker-group');
                        group.style.cursor = 'pointer';

                        // –°–æ–∑–¥–∞–µ–º –∫—Ä—É–≥ –º–∞—Ä–∫–µ—Ä–∞ —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º
                        const markerRadius = 5 / mapZoom;
                        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        circle.setAttribute('cx', pixels.x);
                        circle.setAttribute('cy', pixels.y);
                        circle.setAttribute('r', markerRadius);
                        circle.setAttribute('fill', color);
                        circle.setAttribute('stroke', 'white');
                        circle.setAttribute('stroke-width', 2 / mapZoom);
                        circle.setAttribute('class', 'marker-circle');

                        // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—É—é –º–µ—Ç–∫—É (—Å–∫—Ä—ã—Ç—É—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
                        const textBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        textBg.setAttribute('x', pixels.x + 10);
                        textBg.setAttribute('y', pixels.y - 20);
                        textBg.setAttribute('width', obj.name.length * 6 + 6);
                        textBg.setAttribute('height', 18);
                        textBg.setAttribute('class', 'marker-label-bg');
                        textBg.style.display = 'none';

                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        text.setAttribute('x', pixels.x + 13);
                        text.setAttribute('y', pixels.y - 7);
                        text.setAttribute('class', 'marker-label');
                        text.textContent = obj.name;
                        text.style.display = 'none';

                        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                        group.addEventListener('mouseenter', () => {
                            circle.setAttribute('r', 8);
                            circle.setAttribute('stroke-width', 3);
                            textBg.style.display = 'block';
                            text.style.display = 'block';
                            
                            const tooltip = document.getElementById('tooltip');
                            tooltip.textContent = obj.name;
                            tooltip.classList.add('visible');
                        });

                        group.addEventListener('mouseleave', () => {
                            circle.setAttribute('r', 5);
                            circle.setAttribute('stroke-width', 2);
                            textBg.style.display = 'none';
                            text.style.display = 'none';
                            
                            const tooltip = document.getElementById('tooltip');
                            tooltip.classList.remove('visible');
                        });

                        group.addEventListener('mousemove', (e) => {
                            const tooltip = document.getElementById('tooltip');
                            tooltip.style.left = (e.clientX + 10) + 'px';
                            tooltip.style.top = (e.clientY + 10) + 'px';
                        });

                        group.addEventListener('mousedown', (e) => {
                            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è, —á—Ç–æ–±—ã –Ω–µ –Ω–∞—á–∞—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã
                            e.stopPropagation();
                        });
                        
                        group.addEventListener('click', (e) => {
                            e.stopPropagation(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–µ
                            const rows = document.querySelectorAll('#objects-table tbody tr');
                            rows.forEach(row => {
                                if (row.querySelector('strong').textContent === obj.name) {
                                    row.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                                    row.classList.add('table-row-active');
                                    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ª–∏–Ω–∏–π –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
                                    if (obj.name === '–≠–∫–≤–∞—Ç–æ—Ä') {
                                        drawEquatorLine(svg, svgHeight);
                                    }
                                    setTimeout(() => row.classList.remove('table-row-active'), 2000);
                                }
                            });
                        });

                        group.appendChild(circle);
                        group.appendChild(textBg);
                        group.appendChild(text);
                        svg.appendChild(group);
                    }
                });
            }
        }

        function highlightMarker(objectName) {
            const groups = document.querySelectorAll('.marker-group');
            groups.forEach(group => {
                const dataName = group.getAttribute('data-name');
                let shouldHighlight = dataName === objectName;
                
                // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –¢–∏—Ö–∏–π –æ–∫–µ–∞–Ω, –≤—ã–¥–µ–ª—è–µ–º –æ–±–µ –º–µ—Ç–∫–∏
                if (objectName === '–¢–∏—Ö–∏–π –æ–∫–µ–∞–Ω' && (dataName === '–¢–∏—Ö–∏–π –æ–∫–µ–∞–Ω' || dataName === '~–¢–∏—Ö–∏–π –æ–∫–µ–∞–Ω –∑–∞–ø–∞–¥–Ω—ã–π')) {
                    shouldHighlight = true;
                }
                
                if (shouldHighlight) {
                    const circle = group.querySelector('.marker-circle');
                    circle.setAttribute('r', 8);
                    circle.setAttribute('stroke-width', 3);
                    const textBg = group.querySelector('.marker-label-bg');
                    const text = group.querySelector('.marker-label');
                    textBg.style.display = 'block';
                    text.style.display = 'block';
                }
            });
        }

        function clearHighlight() {
            const groups = document.querySelectorAll('.marker-group');
            groups.forEach(group => {
                const circle = group.querySelector('.marker-circle');
                circle.setAttribute('r', 5);
                circle.setAttribute('stroke-width', 2);
                const textBg = group.querySelector('.marker-label-bg');
                const text = group.querySelector('.marker-label');
                textBg.style.display = 'none';
                text.style.display = 'none';
            });
        }

        function scrollToMarker(objectName) {
            const groups = document.querySelectorAll('.marker-group');
            groups.forEach(group => {
                if (group.getAttribute('data-name') === objectName) {
                    const circle = group.querySelector('.marker-circle');
                    const cx = parseFloat(circle.getAttribute('cx'));
                    const cy = parseFloat(circle.getAttribute('cy'));
                    // –ú–∞—Ä–∫–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∏–¥–Ω–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è viewport
                }
            });
        }

        function drawEquatorLine(svg, svgHeight) {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ª–∏–Ω–∏—é –µ—Å–ª–∏ –µ—Å—Ç—å
            const oldLine = svg.querySelector('[data-line="equator"]');
            if (oldLine) oldLine.remove();

            // –≠–∫–≤–∞—Ç–æ—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —à–∏—Ä–æ—Ç–µ 0, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç y = svgHeight / 2
            const equatorY = (90 - 0) / 180 * svgHeight;
            
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', 0);
            line.setAttribute('y1', equatorY);
            line.setAttribute('x2', svg.getAttribute('width'));
            line.setAttribute('y2', equatorY);
            line.setAttribute('stroke', '#000000');
            line.setAttribute('stroke-width', '2');
            line.setAttribute('opacity', '0.6');
            line.setAttribute('stroke-dasharray', '5,5');
            line.setAttribute('data-line', 'equator');
            line.style.pointerEvents = 'none';
            
            svg.appendChild(line);
        }

        function drawMeridianLine(svg, svgWidth, svgHeight) {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ª–∏–Ω–∏—é –µ—Å–ª–∏ –µ—Å—Ç—å
            const oldLine = svg.querySelector('[data-line="meridian"]');
            if (oldLine) oldLine.remove();

            // –ù—É–ª–µ–≤–æ–π –º–µ—Ä–∏–¥–∏–∞–Ω: lon = 0, centerLon = 40
            const centerLon = 40;
            const lonFromCenter = 0 - centerLon;
            let normalizedLon = lonFromCenter;
            if (normalizedLon < -180) normalizedLon += 360;
            
            const meridianX = (normalizedLon / 180) * (svgWidth / 2) + (svgWidth / 2);
            
            // –†–∏—Å—É–µ–º –¥—É–≥—É (–æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å) –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–π –ª–∏–Ω–∏–∏
            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            circle.setAttribute('cx', meridianX);
            circle.setAttribute('cy', svgHeight / 2);
            circle.setAttribute('r', svgHeight / 2);
            circle.setAttribute('stroke', '#000000');
            circle.setAttribute('stroke-width', '2');
            circle.setAttribute('opacity', '0.6');
            circle.setAttribute('stroke-dasharray', '5,5');
            circle.setAttribute('fill', 'none');
            circle.setAttribute('data-line', 'meridian');
            circle.style.pointerEvents = 'none';
            
            svg.appendChild(circle);
        }

        function refreshView() {
            updateTable();
            updateMap();
            constrainPan();
            updateMapTransform();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π —Ñ–∏–ª—å—Ç—Ä–æ–≤
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentFilter = this.dataset.filter;
                refreshView();
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∏—Å–∫–∞
        document.getElementById('search-input').addEventListener('input', function(e) {
            currentSearch = e.target.value;
            refreshView();
        });

        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–∞—Ä—Ç—ã
        document.getElementById('world-map').addEventListener('load', function() {
            setTimeout(() => {
                refreshView();
                constrainPan();
                updateMapTransform();
                initMapMouseControls();
            }, 100);
        });

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', () => {
            setTimeout(() => {
                refreshView();
                constrainPan();
                updateMapTransform();
            }, 100);
        });

        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        prepareAllObjects();
        let totalCount = allObjects.length - 1; // –ò—Å–∫–ª—é—á–∞–µ–º —Å–∫—Ä—ã—Ç—É—é –º–µ—Ç–∫—É ~–¢–∏—Ö–∏–π –æ–∫–µ–∞–Ω –∑–∞–ø–∞–¥–Ω—ã–π
        document.getElementById('total-count').textContent = totalCount;
        document.getElementById('categories-count').textContent = Object.keys(objectsData).length;

        // –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
        refreshView();
        updateMapTransform();
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—ã—à—å—é (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –∫–∞—Ä—Ç–∞ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞)
        if (document.getElementById('world-map').complete) {
            setTimeout(() => {
                constrainPan();
                updateMapTransform();
                initMapMouseControls();
            }, 100);
        } else {
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ load
        }
    </script>
</body>
</html>
